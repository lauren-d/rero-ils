# -*- coding: utf-8 -*-
#
# Copyright (C) 2020 UCLouvain.
#
# Invenio-Fedora-Harvester is free software; you can redistribute it and/or
# modify it under the terms of the MIT License; see LICENSE file for more
# details.

# Fedora harvester configuration.
dial-ebooks:
    #baseurl: http://vs-vital-prod.sipr-dc.ucl.ac.be/fedora
    baseurl: https://dial.uclouvain.be/fedora
    username: fedoraAdmin
    password: xtg854
    query: 'PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
            PREFIX fedora-view: <info:fedora/fedora-system:def/view#>
            PREFIX fedora-model: <info:fedora/fedora-system:def/model#>

            SELECT ?pid ?state ?lastModifiedDate
            WHERE {{
               ?pid fedora-view:lastModifiedDate ?lastModifiedDate .
               ?pid fedora-model:state ?state .
               ?pid fedora-model:hasModel <info:fedora/boreal-system:ebookCM> .
               FILTER (?lastModifiedDate > "{timestamp}"^^xsd:dateTime) .
            }}
            ORDER BY (?lastModifiedDate)
            LIMIT {size}'
    objectpath: 'objects/{pid}/datastreams/{datastream}/content'
    datastream: MARCXML
    comment: ''

dial-pr:
    baseurl: http://vs-vital-prod.sipr-dc.ucl.ac.be/fedora
    username: fedoraAdmin
    password: xtg854
    query: 'PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
                PREFIX fedora-view: <info:fedora/fedora-system:def/view#>
                PREFIX fedora-model: <info:fedora/fedora-system:def/model#>

                SELECT ?pid ?state ?lastModifiedDate
                WHERE {{
                   ?pid fedora-view:lastModifiedDate ?lastModifiedDate .
                   ?pid fedora-model:state ?state .
                   ?pid fedora-model:hasModel <info:fedora/boreal-system:ebookCM> .
                   FILTER (?lastModifiedDate > "{timestamp}"^^xsd:dateTime) .
                }}
                ORDER BY (?lastModifiedDate)
                LIMIT {size}'
    objectpath: 'objects/{pid}/datastreams/{datastream}/content'
    datastream: MARCXML
    comment: ''

dial-mem:
    baseurl: http://vs-vital-prod.sipr-dc.ucl.ac.be/fedora
    username: fedoraAdmin
    password: xtg854
    query: 'PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
                PREFIX fedora-view: <info:fedora/fedora-system:def/view#>
                PREFIX fedora-model: <info:fedora/fedora-system:def/model#>

                SELECT ?pid ?state ?lastModifiedDate
                WHERE {{
                   ?pid fedora-view:lastModifiedDate ?lastModifiedDate .
                   ?pid fedora-model:state ?state .
                   ?pid fedora-model:hasModel <info:fedora/boreal-system:ebookCM> .
                   FILTER (?lastModifiedDate > "{timestamp}"^^xsd:dateTime) .
                }}
                ORDER BY (?lastModifiedDate)
                LIMIT {size}'
    objectpath: 'objects/{pid}/datastreams/{datastream}/content'
    datastream: MARCXML
    comment: ''

dial-pul:
    baseurl: http://vs-vital-prod.sipr-dc.ucl.ac.be/fedora
    username: fedoraAdmin
    password: xtg854
    query: 'PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
                PREFIX fedora-view: <info:fedora/fedora-system:def/view#>
                PREFIX fedora-model: <info:fedora/fedora-system:def/model#>

                SELECT ?pid ?state ?lastModifiedDate
                WHERE {{
                   ?pid fedora-view:lastModifiedDate ?lastModifiedDate .
                   ?pid fedora-model:state ?state .
                   ?pid fedora-model:hasModel <info:fedora/boreal-system:ebookCM> .
                   FILTER (?lastModifiedDate > "{timestamp}"^^xsd:dateTime) .
                }}
                ORDER BY (?lastModifiedDate)
                LIMIT {size}'
    objectpath: 'objects/{pid}/datastreams/{datastream}/content'
    datastream: MARCXML
    comment: ''
